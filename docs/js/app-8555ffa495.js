var score=0,highScore=0,rockOccur=5e3,Sprite=function(e,t){this.x=e,this.y=t,this.sprite="images/Star.png"};Sprite.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Sprite.prototype.checkCollision=function(e){e.x<this.x+65&&e.x+55>this.x&&e.y<this.y+50&&70+e.y>this.y&&(life.numberOfLives<1?(score>highScore&&(highScore=score),score=0):life.numberOfLives-=1,e.reset())};var Enemy=function(e,t){Sprite.call(this,e,t),this.randomizer=Math.floor(3*Math.random()+1),this.sprite="images/enemy-bug.png"};Enemy.prototype=Object.create(Sprite.prototype),Enemy.prototype.update=function(e,t){this.checkCollision(t);var i=Math.floor(3*Math.random()+1);this.speed=(100+25*score)*e,this.x<=-100?this.sprite="images/enemy-bug.png":this.x>=550&&(this.sprite="images/enemy-bug-reverse.png"),1==this.randomizer?this.x<655?this.x=this.x+this.speed:(this.x=-150,this.randomizer=i):2==this.randomizer?this.x>-150?this.x=this.x-this.speed:(this.x=655,this.randomizer=i):(this.x=this.x+Math.floor(50*Math.random()+1),this.randomizer=i)};var Rock=function(e,t){Sprite.call(this,e,t),this.randomX=Math.floor(Math.random()*rockOccur+1),this.sprite="images/Rock.png"};Rock.prototype=Object.create(Sprite.prototype),Rock.prototype.update=function(e,t){this.checkCollision(t);var i=Math.floor(Math.random()*rockOccur+1);this.speed=250*e,this.y<210?this.y=this.y+this.speed:(this.y=0,this.x=i)};var Player=function(e,t){Sprite.call(this,e,t),this.sprite="images/char-horn-girl.png"};Player.prototype=Object.create(Sprite.prototype),Player.prototype.update=function(e){if(this.y<=-10){score+=1,life.x=Math.floor(2e3*Math.random()+1),life.y=Math.floor(250*Math.random()+1),rockOccur>505&&(rockOccur-=200);for(var t=0;t<allEnemies.length;t++)allEnemies[t].update.speed+=50;this.reset()}},Player.prototype.handleInput=function(e){switch(console.log(e),e){case"left":this.x<=0?this.x=0:this.x-=30;break;case"right":this.x>=410?this.x=410:this.x+=30;break;case"up":this.y<=-20?this.y=-20:this.y-=30;break;case"down":this.y>=430?this.y=430:this.y+=30;break;default:console.log("no movement")}},Player.prototype.reset=function(){this.x=200,this.y=400,console.log(this.x+", "+this.y)};var Life=function(e,t){Sprite.call(this,e,t),this.sprite="images/Heart.png",this.numberOfLives=0,this.moveUpCounter=0,this.moveDownCounter=0};Life.prototype=Object.create(Sprite.prototype),Life.prototype.update=function(e,t){this.checkCollision(t),this.moveUpCounter<15?(this.moveDownCounter=0,this.y-=70*e,this.moveUpCounter+=1):this.moveDownCounter<15?(this.y+=70*e,this.moveDownCounter+=1):(this.moveUpCounter=0,this.moveDownCounter=0)},Life.prototype.checkCollision=function(e){e.x<this.x+65&&e.x+55>this.x&&e.y<this.y+50&&70+e.y>this.y&&(this.numberOfLives+=1,this.x=Math.floor(2e3*Math.random()+1),this.y=Math.floor(250*Math.random()+1))};var enemy1=new Enemy(-150,50),enemy2=new Enemy(-150,140),enemy3=new Enemy(-150,225),allEnemies=[enemy1,enemy2,enemy3],rock1=new Rock(100,0),allRocks=[rock1],player=new Player(200,400),life=new Life(200,300);document.addEventListener("keyup",function(e){var t={37:"left",38:"up",39:"right",40:"down"};player.handleInput(t[e.keyCode])});